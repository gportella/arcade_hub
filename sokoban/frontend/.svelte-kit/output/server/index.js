import{B as e,a as t,b as r,c as s,p as n,s as o,o as a,r as i,d as c,e as l,g as u,f as d,h as p,i as h,j as f,k as m}from"./chunks/internal.js";import*as _ from"devalue";import{m as y,d as g,a as w,r as v,w as $,v as b,b as k,c as x,e as j,n as E,f as R,g as S,h as O}from"./chunks/exports.js";import{parse as T,serialize as q}from"cookie";import*as A from"set-cookie-parser";const P=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],H=["GET","POST","HEAD"];function U(e,t){const r=[];let s;e.split(",").forEach(((e,t)=>{const s=/([^/ \t]+)\/([^; \t]+)[ \t]*(?:;[ \t]*q=([0-9.]+))?/.exec(e);if(s){const[,e,n,o="1"]=s;r.push({type:e,subtype:n,q:+o,i:t})}})),r.sort(((e,t)=>e.q!==t.q?t.q-e.q:"*"===e.subtype!=("*"===t.subtype)?"*"===e.subtype?1:-1:"*"===e.type!=("*"===t.type)?"*"===e.type?1:-1:e.i-t.i));let n=1/0;for(const o of t){const[e,t]=o.split("/"),a=r.findIndex((r=>!(r.type!==e&&"*"!==r.type||r.subtype!==t&&"*"!==r.subtype)));-1!==a&&a<n&&(s=o,n=a)}return s}function C(e){return function(e,...t){const r=e.headers.get("content-type")?.split(";",1)[0].trim()??"";return t.includes(r.toLowerCase())}(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain")}let N,L=null;function W(e,t){try{return L=e,N?N.run(e,t):t()}finally{L=null}}import("node:async_hooks").then((e=>N=new e.AsyncLocalStorage)).catch((()=>{}));class z{constructor(e,t){this.status=e,this.body="string"==typeof t?{message:t}:t||{message:`Error: ${e}`}}toString(){return JSON.stringify(this.body)}}class D{constructor(e,t){this.status=e,this.location=t}}class I extends Error{constructor(e,t,r){super(r),this.status=e,this.text=t}}class F{constructor(e,t){this.status=e,this.data=t}}const J="/__data.json",G=".html__data.json";function M(e){return e.endsWith(".html")?e.replace(/\.html$/,G):e.replace(/\/$/,"")+J}const B="/__route.js";function V(e){return e.replace(/\/$/,"")+B}function K(e,t){const r=JSON.stringify(e),s=new Headers(t?.headers);return s.has("content-length")||s.set("content-length",Q.encode(r).byteLength.toString()),s.has("content-type")||s.set("content-type","application/json"),new Response(r,{...t,headers:s})}const Q=new TextEncoder;function X(e,t){const r=new Headers(t?.headers);if(!r.has("content-length")){const s=Q.encode(e);return r.set("content-length",s.byteLength.toString()),new Response(s,{...t,headers:r})}return new Response(e,{...t,headers:r})}function Y(e){return e instanceof z||e instanceof I?e.status:500}const Z={"&":"&amp;",'"':"&quot;"},ee={"&":"&amp;","<":"&lt;"},te="[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]",re=new RegExp(`[${Object.keys(Z).join("")}]|`+te,"g"),se=new RegExp(`[${Object.keys(ee).join("")}]|`+te,"g");function ne(e,t){const r=t?Z:ee;return e.replace(t?re:se,(e=>2===e.length?e:r[e]??`&#${e.charCodeAt(0)};`))}function oe(e,t){return X(`${t} method not allowed`,{status:405,headers:{allow:ae(e).join(", ")}})}function ae(e){const t=P.filter((t=>t in e));return("GET"in e||"HEAD"in e)&&t.push("HEAD"),t}function ie(e,t,r){return X(e.templates.error({status:t,message:ne(r)}),{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function ce(e,t,r){var s;const n=Y(r=r instanceof z?r:(s=r)instanceof Error||s&&s.name&&s.message?s:new Error(JSON.stringify(s))),o=await le(e,t,r),a=U(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||"application/json"===a?K(o,{status:n}):ie(t,n,o.message)}async function le(e,t,r){if(r instanceof z)return r.body;const s=Y(r),n=function(e){return e instanceof I?e.text:"Internal Error"}(r);return await W(e,(()=>t.hooks.handleError({error:r,event:e,status:s,message:n})))??{message:n}}function ue(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function de(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (${t.path})`:""===t.path?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function pe(e){const t={};return e.uses&&e.uses.dependencies.size>0&&(t.dependencies=Array.from(e.uses.dependencies)),e.uses&&e.uses.search_params.size>0&&(t.search_params=Array.from(e.uses.search_params)),e.uses&&e.uses.params.size>0&&(t.params=Array.from(e.uses.params)),e.uses?.parent&&(t.parent=1),e.uses?.route&&(t.route=1),e.uses?.url&&(t.url=1),t}function he(e,t){return e._.prerendered_routes.has(t)||"/"===t.at(-1)&&e._.prerendered_routes.has(t.slice(0,-1))}function fe(e){return e.filter((e=>null!=e))}function me(e){return"application/json"===U(e.request.headers.get("accept")??"*/*",["application/json","text/html"])&&"POST"===e.request.method}function _e(e){return e instanceof F?new Error('Cannot "throw fail()". Use "return fail()"'):e}function ye(e){return ge({type:"redirect",status:e.status,location:e.location})}function ge(e,t){return K(e,t)}function we(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://svelte.dev/docs/kit/form-actions#named-actions")}async function ve(e,t){const r=new URL(e.request.url);let s="default";for(const o of r.searchParams)if(o[0].startsWith("/")){if(s=o[0].slice(1),"default"===s)throw new Error('Cannot use reserved action name "default"');break}const n=t[s];if(!n)throw new I(404,"Not Found",`No action with name '${s}' found`);if(!C(e.request))throw new I(415,"Unsupported Media Type",`Form actions expect form-encoded data — received ${e.request.headers.get("content-type")}`);return W(e,(()=>n(e)))}function $e(e,t,r){const s=Object.fromEntries(Object.entries(r).map((([e,t])=>[e,t.encode])));return be(e,(e=>_.stringify(e,s)),t)}function be(e,t,r){try{return t(e)}catch(s){const t=s;if(e instanceof Response)throw new Error(`Data returned from action inside ${r} is not serializable. Form actions need to return plain objects or fail(). E.g. return { success: true } or return fail(400, { message: "invalid" });`);if("path"in t){let e=`Data returned from action inside ${r} is not serializable: ${t.message}`;throw""!==t.path&&(e+=` (data.${t.path})`),new Error(e)}throw t}}const ke="x-sveltekit-invalidated",xe="x-sveltekit-trailing-slash";async function je({event:t,state:r,node:s,parent:n}){if(!s?.server)return null;let o=!0;const a={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},i=s.server.load,c=s.server.trailingSlash;if(!i)return{type:"data",data:null,uses:a,slash:c};const l=y(t.url,(()=>{o&&(a.url=!0)}),(e=>{o&&a.search_params.add(e)}));r.prerendering&&g(l);let u=!1;const d=await W(t,(()=>i.call(null,{...t,fetch:(r,s)=>{const n=new URL(r instanceof Request?r.url:r,t.url);return e&&u&&a.dependencies.has(n.href),t.fetch(r,s)},depends:(...e)=>{for(const r of e){const{href:e}=new URL(r,t.url);a.dependencies.add(e)}},params:new Proxy(t.params,{get:(t,r)=>(e&&u&&"string"==typeof r&&a.params.has(r),o&&a.params.add(r),t[r])}),parent:async()=>(e&&u&&a.parent,o&&(a.parent=!0),n()),route:new Proxy(t.route,{get:(t,r)=>(e&&u&&"string"==typeof r&&a.route,o&&(a.route=!0),t[r])}),url:l,untrack(e){o=!1;try{return e()}finally{o=!0}}})));return u=!0,{type:"data",data:d??null,uses:a,slash:c}}async function Ee({event:e,fetched:t,node:r,parent:s,server_data_promise:n,state:o,resolve_opts:a,csr:i}){const c=await n;return r?.universal?.load?await r.universal.load.call(null,{url:e.url,params:e.params,data:c?.data??null,route:e.route,fetch:Re(e,o,t,i,a),setHeaders:e.setHeaders,depends:()=>{},parent:s,untrack:e=>e()})??null:c?.data??null}function Re(e,t,r,s,n){return(o,a)=>{const i=(async(o,a)=>{const i=o instanceof Request&&o.body?o.clone().body:null,c=o instanceof Request&&[...o.headers].length?new Headers(o.headers):a?.headers;let l=await e.fetch(o,a);const u=new URL(o instanceof Request?o.url:o,e.url),d=u.origin===e.url.origin;let p;if(d)t.prerendering&&(p={response:l,body:null},t.prerendering.dependencies.set(u.pathname,p));else if("https:"===u.protocol||"http:"===u.protocol)if("no-cors"===(o instanceof Request?o.mode:a?.mode??"cors"))l=new Response("",{status:l.status,statusText:l.statusText,headers:l.headers});else{const t=l.headers.get("access-control-allow-origin");if(!t||t!==e.url.origin&&"*"!==t)throw new Error(`CORS error: ${t?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}const h=new Proxy(l,{get(t,s,n){async function l(s,n){const l=Number(t.status);if(isNaN(l))throw new Error(`response.status is not a number. value: "${t.status}" type: ${typeof t.status}`);r.push({url:d?u.href.slice(e.url.origin.length):u.href,method:e.request.method,request_body:o instanceof Request&&i?await Se(i):a?.body,request_headers:c,response_body:s,response:t,is_b64:n})}if("arrayBuffer"===s)return async()=>{const e=await t.arrayBuffer();return p&&(p.body=new Uint8Array(e)),e instanceof ArrayBuffer&&await l(function(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");const t=new Uint8Array(new Uint16Array([1]).buffer)[0]>0;return btoa(new TextDecoder(t?"utf-16le":"utf-16be").decode(new Uint16Array(new Uint8Array(e))))}(e),!0),e};async function h(){const e=await t.text();return e&&"string"!=typeof e||await l(e,!1),p&&(p.body=e),e}return"text"===s?h:"json"===s?async()=>JSON.parse(await h()):Reflect.get(t,s,t)}});if(s){const t=l.headers.get;l.headers.get=r=>{const s=r.toLowerCase(),o=t.call(l.headers,s);if(o&&!s.startsWith("x-sveltekit-")&&!n.filterSerializedResponseHeaders(s,o))throw new Error(`Failed to get response header "${s}" — it must be included by the \`filterSerializedResponseHeaders\` option: https://svelte.dev/docs/kit/hooks#Server-hooks-handle (at ${e.route.id})`);return o}}return h})(o,a);return i.catch((()=>{})),i}}async function Se(e){let t="";const r=e.getReader(),s=new TextDecoder;for(;;){const{done:e,value:n}=await r.read();if(e)break;t+=s.decode(n)}return t}function Oe(...e){let t=5381;for(const r of e)if("string"==typeof r){let e=r.length;for(;e;)t=33*t^r.charCodeAt(--e)}else{if(!ArrayBuffer.isView(r))throw new TypeError("value must be a string or TypedArray");{const e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let s=e.length;for(;s;)t=33*t^e[--s]}}return(t>>>0).toString(36)}const Te={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},qe=new RegExp(`[${Object.keys(Te).join("")}]`,"g"),Ae=JSON.stringify,Pe=new TextEncoder;function He(e){Ce[0]||function(){function e(e){return 4294967296*(e-Math.floor(e))}let t=2;for(let r=0;r<64;t++){let s=!0;for(let e=2;e*e<=t;e++)if(t%e==0){s=!1;break}s&&(r<8&&(Ue[r]=e(t**.5)),Ce[r]=e(t**(1/3)),r++)}}();const t=Ue.slice(0),r=function(e){const t=Pe.encode(e),r=8*t.length,s=512*Math.ceil((r+65)/512),n=new Uint8Array(s/8);n.set(t),n[t.length]=128,Ne(n);const o=new Uint32Array(n.buffer);return o[o.length-2]=Math.floor(r/4294967296),o[o.length-1]=r,o}(e);for(let n=0;n<r.length;n+=16){const e=r.subarray(n,n+16);let s,o,a,i=t[0],c=t[1],l=t[2],u=t[3],d=t[4],p=t[5],h=t[6],f=t[7];for(let t=0;t<64;t++)t<16?s=e[t]:(o=e[t+1&15],a=e[t+14&15],s=e[15&t]=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+e[15&t]+e[t+9&15]|0),s=s+f+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(h^d&(p^h))+Ce[t],f=h,h=p,p=d,d=u+s|0,u=l,l=c,c=i,i=s+(c&l^u&(c^l))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;t[0]=t[0]+i|0,t[1]=t[1]+c|0,t[2]=t[2]+l|0,t[3]=t[3]+u|0,t[4]=t[4]+d|0,t[5]=t[5]+p|0,t[6]=t[6]+h|0,t[7]=t[7]+f|0}const s=new Uint8Array(t.buffer);return Ne(s),We(s)}const Ue=new Uint32Array(8),Ce=new Uint32Array(64);function Ne(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=r}}const Le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");function We(e){const t=e.length;let r,s="";for(r=2;r<t;r+=3)s+=Le[e[r-2]>>2],s+=Le[(3&e[r-2])<<4|e[r-1]>>4],s+=Le[(15&e[r-1])<<2|e[r]>>6],s+=Le[63&e[r]];return r===t+1&&(s+=Le[e[r-2]>>2],s+=Le[(3&e[r-2])<<4],s+="=="),r===t&&(s+=Le[e[r-2]>>2],s+=Le[(3&e[r-2])<<4|e[r-1]>>4],s+=Le[(15&e[r-1])<<2],s+="="),s}const ze=new Uint8Array(16),De=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),Ie=/^(nonce|sha\d\d\d)-/;class Fe{#e;#t;#r;#s;#n;#o;#a;#i;#c;#l;#u;#d;#p;#h;#f;constructor(e,t,r){this.#e=e,this.#c=t;const s=this.#c;this.#l=[],this.#u=[],this.#d=[],this.#p=[],this.#h=[];const n=s["script-src"]||s["default-src"],o=s["script-src-elem"],a=s["style-src"]||s["default-src"],i=s["style-src-attr"],c=s["style-src-elem"],l=e=>!!e&&!e.some((e=>"unsafe-inline"===e));this.#r=l(n),this.#s=l(o),this.#o=l(a),this.#a=l(i),this.#i=l(c),this.#t=this.#r||this.#s,this.#n=this.#o||this.#a||this.#i,this.script_needs_nonce=this.#t&&!this.#e,this.style_needs_nonce=this.#n&&!this.#e,this.#f=r}add_script(e){if(!this.#t)return;const t=this.#e?`sha256-${He(e)}`:`nonce-${this.#f}`;this.#r&&this.#l.push(t),this.#s&&this.#u.push(t)}add_style(e){if(!this.#n)return;const t=this.#e?`sha256-${He(e)}`:`nonce-${this.#f}`;if(this.#o&&this.#d.push(t),this.#a&&this.#p.push(t),this.#i){const e="sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=",r=this.#c;!r["style-src-elem"]||r["style-src-elem"].includes(e)||this.#h.includes(e)||this.#h.push(e),t!==e&&this.#h.push(t)}}get_header(e=!1){const t=[],r={...this.#c};this.#d.length>0&&(r["style-src"]=[...r["style-src"]||r["default-src"]||[],...this.#d]),this.#p.length>0&&(r["style-src-attr"]=[...r["style-src-attr"]||[],...this.#p]),this.#h.length>0&&(r["style-src-elem"]=[...r["style-src-elem"]||[],...this.#h]),this.#l.length>0&&(r["script-src"]=[...r["script-src"]||r["default-src"]||[],...this.#l]),this.#u.length>0&&(r["script-src-elem"]=[...r["script-src-elem"]||[],...this.#u]);for(const s in r){if(e&&("frame-ancestors"===s||"report-uri"===s||"sandbox"===s))continue;const n=r[s];if(!n)continue;const o=[s];Array.isArray(n)&&n.forEach((e=>{De.has(e)||Ie.test(e)?o.push(`'${e}'`):o.push(e)})),t.push(o.join(" "))}return t.join("; ")}}class Je extends Fe{get_meta(){const e=this.get_header(!0);if(e)return`<meta http-equiv="content-security-policy" content="${ne(e,!0)}">`}}class Ge extends Fe{constructor(e,t,r){if(super(e,t,r),Object.values(t).filter((e=>!!e)).length>0){const e=t["report-to"]?.length??!1,r=t["report-uri"]?.length??!1;if(!e&&!r)throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class Me{nonce=function(){return crypto.getRandomValues(ze),We(ze)}();csp_provider;report_only_provider;constructor({mode:e,directives:t,reportOnly:r},{prerender:s}){const n="hash"===e||"auto"===e&&s;this.csp_provider=new Je(n,t,this.nonce),this.report_only_provider=new Ge(n,r,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(e){this.csp_provider.add_script(e),this.report_only_provider.add_script(e)}add_style(e){this.csp_provider.add_style(e),this.report_only_provider.add_style(e)}}function Be(){let e,t;return{promise:new Promise(((r,s)=>{e=r,t=s})),fulfil:e,reject:t}}function Ve(){const e=[Be()];return{iterator:{[Symbol.asyncIterator]:()=>({next:async()=>{const t=await e[0].promise;return t.done||e.shift(),t}})},push:t=>{e[e.length-1].fulfil({value:t,done:!1}),e.push(Be())},done:()=>{e[e.length-1].fulfil({done:!0})}}}function Ke(e,t,r){const s={},n=e.slice(1),o=n.filter((e=>void 0!==e));let a=0;for(let i=0;i<t.length;i+=1){const e=t[i];let c=n[i-a];if(e.chained&&e.rest&&a&&(c=n.slice(i-a,i+1).filter((e=>e)).join("/"),a=0),void 0!==c)if(e.matcher&&!r[e.matcher](c)){if(!e.optional||!e.chained)return;a++}else{s[e.name]=c;const r=t[i+1],l=n[i+1];r&&!r.rest&&r.optional&&l&&e.chained&&(a=0),r||l||Object.keys(s).length!==o.length||(a=0)}else e.rest&&(s[e.name]="")}if(!a)return s}function Qe(e,t,r){const{errors:s,layouts:n,leaf:o}=e,a=[...s,...n.map((e=>e?.[1])),o[1]].filter((e=>"number"==typeof e)).map((e=>`'${e}': () => ${Xe(r._.client.nodes?.[e],t)}`)).join(",\n\t\t");return[`{\n\tid: ${Ae(e.id)}`,`errors: ${Ae(e.errors)}`,`layouts: ${Ae(e.layouts)}`,`leaf: ${Ae(e.leaf)}`,`nodes: {\n\t\t${a}\n\t}\n}`].join(",\n\t")}function Xe(e,s){if(!e)return"Promise.resolve({})";if("/"===e[0])return`import('${e}')`;if(""!==t)return`import('${t}/${e}')`;let n=function(e,t){const r=e.split(/[/\\]/),s=t.split(/[/\\]/);for(r.pop();r[0]===s[0];)r.shift(),s.shift();let n=r.length;for(;n--;)r[n]="..";return r.concat(s).join("/")}(s.pathname,`${r}/${e}`);return"."!==n[0]&&(n=`./${n}`),`import('${n}')`}function Ye(e,s,n,o){const a=new Headers({"content-type":"application/javascript; charset=utf-8"});if(e){const i=Qe(e,n,o),c=`${function(e,s,n){const{errors:o,layouts:a,leaf:i}=e;let c="";for(const l of[...o,...a.map((e=>e?.[1])),i[1]]){if("number"!=typeof l)continue;const e=n._.client.css?.[l];for(const s of e??[])c+=`'${t||r}/${s}',`}return c?`${Xe(n._.client.start,s)}.then(x => x.load_css([${c}]));`:""}(e,n,o)}\nexport const route = ${i}; export const params = ${JSON.stringify(s)};`;return{response:X(c,{headers:a}),body:c}}return{response:X("",{headers:a}),body:""}}const Ze={...v(!1),check:()=>!1},et=new TextEncoder;async function tt({branch:e,fetched:c,options:l,manifest:u,state:d,page_config:p,status:h,error:f=null,event:m,resolve_opts:y,action_result:g}){if(d.prerendering){if("nonce"===l.csp.mode)throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(l.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:w}=u._,v=new Set(w.imports),b=new Set(w.stylesheets),k=new Set(w.fonts),x=new Set,j=new Map;let E;const R="success"===g?.type||"failure"===g?.type?g.data??null:null;let S=r,O=t,T=Ae(r);if(d.prerendering?.fallback?l.hash_routing&&(T="new URL('.', location).pathname.slice(0, -1)"):(S=m.url.pathname.slice(r.length).split("/").slice(2).map((()=>"..")).join("/")||".",T=`new URL(${Ae(S)}, location).pathname.slice(0, -1)`,(!t||"/"===t[0]&&"/_svelte_kit_assets"!==t)&&(O=S)),p.ssr){const t={stores:{page:$(null),navigating:$(null),updated:Ze},constructors:await Promise.all(e.map((({node:e})=>{if(!e.component)throw new Error(`Missing +page.svelte component for route ${m.route.id}`);return e.component()}))),form:R};let r={};for(let n=0;n<e.length;n+=1)r={...r,...e[n].data},t[`data_${n}`]=r;t.page={error:f,params:m.params,route:m.route,status:h,url:m.url,data:r,form:R,state:{}},a({base:S,assets:O});const s={context:new Map([["__request__",{page:t.page}]])};try{E=l.root.render(t,s)}finally{i()}for(const{node:n}of e){for(const e of n.imports)v.add(e);for(const e of n.stylesheets)b.add(e);for(const e of n.fonts)k.add(e);n.inline_styles&&!w.inline&&Object.entries(await n.inline_styles()).forEach((([e,t])=>j.set(e,t)))}}else E={head:"",html:"",css:{code:"",map:null}};let q="",A=E.html;const P=new Me(l.csp,{prerender:!!d.prerendering}),H=e=>e.startsWith("/")?r+e:`${O}/${e}`,U=w.inline?w.inline?.style:Array.from(j.values()).join("\n");if(U){const e=[];P.style_needs_nonce&&e.push(` nonce="${P.nonce}"`),P.add_style(U),q+=`\n\t<style${e.join("")}>${U}</style>`}for(const t of b){const e=H(t),r=['rel="stylesheet"'];if(j.has(t))r.push("disabled",'media="(max-width: 0)"');else if(y.preload({type:"css",path:e})){const t=['rel="preload"','as="style"'];x.add(`<${encodeURI(e)}>; ${t.join(";")}; nopush`)}q+=`\n\t\t<link href="${e}" ${r.join(" ")}>`}for(const t of k){const e=H(t);y.preload({type:"font",path:e})&&(q+=`\n\t\t<link ${['rel="preload"','as="font"',`type="font/${t.slice(t.lastIndexOf(".")+1)}"`,`href="${e}"`,"crossorigin"].join(" ")}>`)}const C=`__sveltekit_${l.version_hash}`,{data:N,chunks:L}=function(e,t,r,s,n){let o=1,a=0;const{iterator:i,push:c,done:l}=Ve();function u(r){if("function"==typeof r?.then){const i=o++;return a+=1,r.then((e=>({data:e}))).catch((async r=>({error:await le(e,t,r)}))).then((async({data:r,error:o})=>{let d;a-=1;try{d=_.uneval({id:i,data:r,error:o},u)}catch{o=await le(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),r=void 0,d=_.uneval({id:i,data:r,error:o},u)}const p=s.script_needs_nonce?` nonce="${s.nonce}"`:"";c(`<script${p}>${n}.resolve(${d})<\/script>\n`),0===a&&l()})),`${n}.defer(${i})`}for(const e in t.hooks.transport){const s=t.hooks.transport[e].encode(r);if(s)return`app.decode('${e}', ${_.uneval(s,u)})`}}try{return{data:`[${r.map((e=>{if(!e)return"null";const t={type:"data",data:e.data,uses:pe(e)};return e.slash&&(t.slash=e.slash),_.uneval(t,u)})).join(",")}]`,chunks:a>0?i:null}}catch(d){throw d.path=d.path.slice(1),new Error(de(e,d))}}(m,l,e.map((e=>e.server_data)),P,C);if(p.ssr&&p.csr&&(A+=`\n\t\t\t${c.map((e=>function(e,t,r=!1){const s={};let n=null,o=null,a=!1;for(const[u,d]of e.response.headers)t(u,d)&&(s[u]=d),"cache-control"===u?n=d:"age"===u?o=d:"vary"===u&&"*"===d.trim()&&(a=!0);const i={status:e.response.status,statusText:e.response.statusText,headers:s,body:e.response_body},c=JSON.stringify(i).replace(qe,(e=>Te[e])),l=['type="application/json"',"data-sveltekit-fetched",`data-url="${ne(e.url,!0)}"`];if(e.is_b64&&l.push("data-b64"),e.request_headers||e.request_body){const t=[];e.request_headers&&t.push([...new Headers(e.request_headers)].join(",")),e.request_body&&t.push(e.request_body),l.push(`data-hash="${Oe(...t)}"`)}if(!r&&"GET"===e.method&&n&&!a){const e=/s-maxage=(\d+)/g.exec(n)??/max-age=(\d+)/g.exec(n);if(e){const t=+e[1]-+(o??"0");l.push(`data-ttl="${t}"`)}}return`<script ${l.join(" ")}>${c}<\/script>`}(e,y.filterSerializedResponseHeaders,!!d.prerendering))).join("\n\t\t\t")}`),p.csr){const r=u._.client.routes?.find((e=>e.id===m.route.id))??null;if(w.uses_env_dynamic_public&&d.prerendering&&v.add(`${s}/env.js`),!w.inline){const e=Array.from(v,(e=>H(e))).filter((e=>y.preload({type:"js",path:e})));for(const t of e)x.add(`<${encodeURI(t)}>; rel="modulepreload"; nopush`),"modulepreload"!==l.preload_strategy?q+=`\n\t\t<link rel="preload" as="script" crossorigin="anonymous" href="${t}">`:d.prerendering&&(q+=`\n\t\t<link rel="modulepreload" href="${t}">`)}if(u._.client.routes&&d.prerendering&&!d.prerendering.fallback){const e=V(m.url.pathname);d.prerendering.dependencies.set(e,Ye(r,m.params,new URL(e,m.url),u))}const o=[],a=w.uses_env_dynamic_public&&d.prerendering,i=[`base: ${T}`];t&&i.push(`assets: ${Ae(t)}`),w.uses_env_dynamic_public&&i.push(`env: ${a?"null":Ae(n)}`),L&&(o.push("const deferred = new Map();"),i.push("defer: (id) => new Promise((fulfil, reject) => {\n\t\t\t\t\t\t\tdeferred.set(id, { fulfil, reject });\n\t\t\t\t\t\t})"),i.push("resolve: ({ id, data, error }) => {\n\t\t\t\t\t\t\tconst try_to_resolve = () => {\n\t\t\t\t\t\t\t\tif (!deferred.has(id)) {\n\t\t\t\t\t\t\t\t\tsetTimeout(try_to_resolve, 0);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst { fulfil, reject } = deferred.get(id);\n\t\t\t\t\t\t\t\tdeferred.delete(id);\n\t\t\t\t\t\t\t\tif (error) reject(error);\n\t\t\t\t\t\t\t\telse fulfil(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttry_to_resolve();\n\t\t\t\t\t\t}")),o.push(`${C} = {\n\t\t\t\t\t\t${i.join(",\n\t\t\t\t\t\t")}\n\t\t\t\t\t};`);const c=["element"];if(o.push("const element = document.currentScript.parentElement;"),p.ssr){const t={form:"null",error:"null"};R&&(t.form=function(e,t,r){const s=e=>{for(const t in r){const n=r[t].encode(e);if(n)return`app.decode('${t}', ${_.uneval(n,s)})`}};return be(e,(e=>_.uneval(e,s)),t)}(R,m.route.id,l.hooks.transport)),f&&(t.error=_.uneval(f));const s=[`node_ids: [${e.map((({node:e})=>e.index)).join(", ")}]`,`data: ${N}`,`form: ${t.form}`,`error: ${t.error}`];if(200!==h&&s.push(`status: ${h}`),u._.client.routes){if(r){const e=Qe(r,m.url,u).replaceAll("\n","\n\t\t\t\t\t\t\t");s.push(`params: ${_.uneval(m.params)}`,`server_route: ${e}`)}}else l.embedded&&s.push(`params: ${_.uneval(m.params)}`,`route: ${Ae(m.route)}`);const n="\t".repeat(a?7:6);c.push(`{\n${n}\t${s.join(`,\n${n}\t`)}\n${n}}`)}const g=w.inline?`${w.inline.script}\n\n\t\t\t\t\t__sveltekit_${l.version_hash}.app.start(${c.join(", ")});`:w.app?`Promise.all([\n\t\t\t\t\t\timport(${Ae(H(w.start))}),\n\t\t\t\t\t\timport(${Ae(H(w.app))})\n\t\t\t\t\t]).then(([kit, app]) => {\n\t\t\t\t\t\tkit.start(app, ${c.join(", ")});\n\t\t\t\t\t});`:`import(${Ae(H(w.start))}).then((app) => {\n\t\t\t\t\t\tapp.start(${c.join(", ")})\n\t\t\t\t\t});`;if(a?o.push(`import(${Ae(`${S}/${s}/env.js`)}).then(({ env }) => {\n\t\t\t\t\t\t${C}.env = env;\n\n\t\t\t\t\t\t${g.replace(/\n/g,"\n\t")}\n\t\t\t\t\t});`):o.push(g),l.service_worker){const e="";o.push(`if ('serviceWorker' in navigator) {\n\t\t\t\t\t\taddEventListener('load', function () {\n\t\t\t\t\t\t\tnavigator.serviceWorker.register('${H("service-worker.js")}'${e});\n\t\t\t\t\t\t});\n\t\t\t\t\t}`)}const $=`\n\t\t\t\t{\n\t\t\t\t\t${o.join("\n\n\t\t\t\t\t")}\n\t\t\t\t}\n\t\t\t`;P.add_script($),A+=`\n\t\t\t<script${P.script_needs_nonce?` nonce="${P.nonce}"`:""}>${$}<\/script>\n\t\t`}const W=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(d.prerendering){const e=[],t=P.csp_provider.get_meta();t&&e.push(t),d.prerendering.cache&&e.push(`<meta http-equiv="cache-control" content="${d.prerendering.cache}">`),e.length>0&&(q=e.join("\n")+q)}else{const e=P.csp_provider.get_header();e&&W.set("content-security-policy",e);const t=P.report_only_provider.get_header();t&&W.set("content-security-policy-report-only",t),x.size&&W.set("link",Array.from(x).join(", "))}q+=E.head;const z=l.templates.app({head:q,body:A,assets:O,nonce:P.nonce,env:o}),D=await y.transformPageChunk({html:z,done:!0})||"";return L||W.set("etag",`"${Oe(D)}"`),L?new Response(new ReadableStream({async start(e){e.enqueue(et.encode(D+"\n"));for await(const t of L)e.enqueue(et.encode(t));e.close()},type:"bytes"}),{headers:W}):X(D,{status:h,headers:W})}class rt{data;constructor(e){this.data=e}layouts(){return this.data.slice(0,-1)}page(){return this.data.at(-1)}validate(){for(const t of this.layouts())t&&(b(t.server,t.server_id),k(t.universal,t.universal_id));const e=this.page();e&&(x(e.server,e.server_id),j(e.universal,e.universal_id))}#m(e){return this.data.reduce(((t,r)=>r?.universal?.[e]??r?.server?.[e]??t),void 0)}csr(){return this.#m("csr")??!0}ssr(){return this.#m("ssr")??!0}prerender(){return this.#m("prerender")??!1}trailing_slash(){return this.#m("trailingSlash")??"never"}get_config(){let e={};for(const t of this.data)(t?.universal?.config||t?.server?.config)&&(e={...e,...t?.universal?.config,...t?.server?.config});return Object.keys(e).length?e:void 0}should_prerender_data(){return this.data.some((e=>e?.server?.load||void 0!==e?.server?.trailingSlash))}}async function st({event:e,options:t,manifest:r,state:s,status:n,error:o,resolve_opts:a}){if(e.request.headers.get("x-sveltekit-error"))return ie(t,n,o.message);const i=[];try{const c=[],l=await r._.nodes[0](),u=new rt([l]),d=u.ssr(),p=u.csr();if(d){s.error=!0;const t=je({event:e,state:s,node:l,parent:async()=>({})}),n=await t,o=await Ee({event:e,fetched:i,node:l,parent:async()=>({}),resolve_opts:a,server_data_promise:t,state:s,csr:p});c.push({node:l,server_data:n,data:o},{node:await r._.nodes[1](),data:null,server_data:null})}return await tt({options:t,manifest:r,state:s,page_config:{ssr:d,csr:p},status:n,error:await le(e,t,o),branch:c,fetched:i,event:e,resolve_opts:a})}catch(c){return c instanceof D?ue(c.status,c.location):ie(t,Y(c),(await le(e,t,c)).message)}}const nt=new TextEncoder;function ot(e,t=200){return X("string"==typeof e?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function at(e){return ot({type:"redirect",location:e.location})}function it(e,t,r){let s=1,n=0;const{iterator:o,push:a,done:i}=Ve(),c={...Object.fromEntries(Object.entries(t.hooks.transport).map((([e,t])=>[e,t.encode]))),Promise:r=>{if("function"==typeof r?.then){const o=s++;n+=1;let l="data";return r.catch((async r=>(l="error",le(e,t,r)))).then((async r=>{let s;try{s=_.stringify(r,c)}catch{const r=await le(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`));l="error",s=_.stringify(r,c)}n-=1,a(`{"type":"chunk","id":${o},"${l}":${s}}\n`),0===n&&i()})),o}}};try{return{data:`{"type":"data","nodes":[${r.map((e=>e?"error"===e.type||"skip"===e.type?JSON.stringify(e):`{"type":"data","data":${_.stringify(e.data,c)},"uses":${JSON.stringify(pe(e))}${e.slash?`,"slash":${JSON.stringify(e.slash)}`:""}}`:"null")).join(",")}]}\n`,chunks:n>0?o:null}}catch(l){throw l.path="data"+l.path,new Error(de(e,l))}}const ct=/[\x00-\x1F\x7F()<>@,;:"/[\]?={} \t]/;function lt(e){if(void 0===e?.path)throw new Error("You must specify a `path` when setting, deleting or serializing cookies")}function ut(e,t){if(!t)return!0;const r="."===t[0]?t.slice(1):t;return e===r||e.endsWith("."+r)}function dt(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r||e.startsWith(r+"/")}function pt(e,t){for(const r of t){const{name:t,value:s,options:n}=r;if(e.append("set-cookie",q(t,s,n)),n.path.endsWith(".html")){const r=M(n.path);e.append("set-cookie",q(t,s,{...n,path:r}))}}}function ht(e,t,r){return e instanceof Request?e:new Request("string"==typeof e?new URL(e,r):e,t)}let ft,mt,_t;const yt=({html:e})=>e,gt=()=>!1,wt=({type:e})=>"js"===e||"css"===e,vt=new Set(["GET","HEAD","POST"]),$t=new Set(["GET","HEAD","OPTIONS"]);async function bt(o,a,i,l){const u=new URL(o.url);if(a.csrf_check_origin&&C(o)&&("POST"===o.method||"PUT"===o.method||"PATCH"===o.method||"DELETE"===o.method)&&o.headers.get("origin")!==u.origin){const e=new z(403,`Cross-site ${o.method} form submissions are forbidden`);return"application/json"===o.headers.get("accept")?K(e.body,{status:e.status}):X(e.body.message,{status:e.status})}if(a.hash_routing&&u.pathname!==r+"/"&&"/[fallback]"!==u.pathname)return X("Not found",{status:404});let d;const p=u.pathname.endsWith(B),h=(f=u.pathname).endsWith(J)||f.endsWith(G);var f;p?u.pathname=function(e){return e.slice(0,-11)}(u.pathname):h&&(u.pathname=function(e){return e.endsWith(G)?e.slice(0,-16)+".html":e.slice(0,-12)}(u.pathname)+("1"===u.searchParams.get(xe)?"/":"")||"/",u.searchParams.delete(xe),d=u.searchParams.get(ke)?.split("").map((e=>"1"===e)),u.searchParams.delete(ke));const m={},{cookies:_,new_cookies:y,get_cookie_header:v,set_internal:$,set_trailing_slash:b}=function(e,t){const r=e.headers.get("cookie")??"",s=T(r,{decode:e=>e});let n;const o={},a={httpOnly:!0,sameSite:"lax",secure:"localhost"!==t.hostname||"http:"!==t.protocol},i={get(e,s){const n=o[e];return n&&ut(t.hostname,n.options.domain)&&dt(t.pathname,n.options.path)?n.value:T(r,{decode:s?.decode})[e]},getAll(e){const s=T(r,{decode:e?.decode});for(const r of Object.values(o))ut(t.hostname,r.options.domain)&&dt(t.pathname,r.options.path)&&(s[r.name]=r.value);return Object.entries(s).map((([e,t])=>({name:e,value:t})))},set(e,t,r){const s=e.match(ct);s&&console.warn(`The cookie name "${e}" will be invalid in SvelteKit 3.0 as it contains ${s.join(" and ")}. See RFC 2616 for more details https://datatracker.ietf.org/doc/html/rfc2616#section-2.2`),lt(r),l(e,t,{...a,...r})},delete(e,t){lt(t),i.set(e,"",{...t,maxAge:0})},serialize(e,r,s){lt(s);let o=s.path;if(!s.domain||s.domain===t.hostname){if(!n)throw new Error("Cannot serialize cookies until after the route is determined");o=R(n,o)}return q(e,r,{...a,...s,path:o})}},c=[];function l(e,r,s){if(!n)return void c.push((()=>l(e,r,s)));let a=s.path;s.domain&&s.domain!==t.hostname||(a=R(n,a)),o[e]={name:e,value:r,options:{...s,path:a}}}return{cookies:i,new_cookies:o,get_cookie_header:function(e,t){const r={...s};for(const s in o){const t=o[s];if(!ut(e.hostname,t.options.domain))continue;if(!dt(e.pathname,t.options.path))continue;const n=t.options.encode||encodeURIComponent;r[t.name]=n(t.value)}if(t){const e=T(t,{decode:e=>e});for(const t in e)r[t]=e[t]}return Object.entries(r).map((([e,t])=>`${e}=${t}`)).join("; ")},set_internal:l,set_trailing_slash:function(e){n=E(t.pathname,e),c.forEach((e=>e()))}}}(o,u),k={cookies:_,fetch:null,getClientAddress:l.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-static does not specify getClientAddress. Please raise an issue")}),locals:{},params:{},platform:l.platform,request:o,route:{id:null},setHeaders:e=>{for(const t in e){const r=t.toLowerCase(),s=e[t];if("set-cookie"===r)throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(r in m)throw new Error(`"${t}" header is already set`);m[r]=s,l.prerendering&&"cache-control"===r&&(l.prerendering.cache=s)}},url:u,isDataRequest:h,isSubRequest:l.depth>0};let x;k.fetch=function({event:e,options:s,manifest:n,state:o,get_cookie_header:a,set_internal:i}){return(l,u)=>{const d=(async(l,u)=>{const d=ht(l,u,e.url);let p=(l instanceof Request?l.mode:u?.mode)??"cors",h=(l instanceof Request?l.credentials:u?.credentials)??"same-origin";return s.hooks.handleFetch({event:e,request:d,fetch:async(l,u)=>{const f=ht(l,u,e.url),m=new URL(f.url);if(f.headers.has("origin")||f.headers.set("origin",e.url.origin),l!==d&&(p=(l instanceof Request?l.mode:u?.mode)??"cors",h=(l instanceof Request?l.credentials:u?.credentials)??"same-origin"),"GET"!==f.method&&"HEAD"!==f.method||("no-cors"!==p||m.origin===e.url.origin)&&m.origin!==e.url.origin||f.headers.delete("origin"),m.origin!==e.url.origin){if(`.${m.hostname}`.endsWith(`.${e.url.hostname}`)&&"omit"!==h){const e=a(m,f.headers.get("cookie"));e&&f.headers.set("cookie",e)}return fetch(f)}const _=t||r,y=decodeURIComponent(m.pathname),g=(y.startsWith(_)?y.slice(_.length):y).slice(1),w=`${g}/index.html`,v=n.assets.has(g)||g in n._.server_assets,$=n.assets.has(w)||w in n._.server_assets;if(v||$){const e=v?g:w;if(o.read){const t=v?n.mimeTypes[g.slice(g.lastIndexOf("."))]:"text/html";return new Response(o.read(e),{headers:t?{"content-type":t}:{}})}if(c&&e in n._.server_assets){const t=n._.server_assets[e],r=n.mimeTypes[e.slice(e.lastIndexOf("."))];return new Response(c(e),{headers:{"Content-Length":""+t,"Content-Type":r}})}return await fetch(f)}if(he(n,r+y))return await fetch(f);if("omit"!==h){const t=a(m,f.headers.get("cookie"));t&&f.headers.set("cookie",t);const r=e.request.headers.get("authorization");r&&!f.headers.has("authorization")&&f.headers.set("authorization",r)}f.headers.has("accept")||f.headers.set("accept","*/*"),f.headers.has("accept-language")||f.headers.set("accept-language",e.request.headers.get("accept-language"));const b=await bt(f,s,n,{...o,depth:o.depth+1}),k=b.headers.get("set-cookie");if(k)for(const e of A.splitCookiesString(k)){const{name:t,value:r,...s}=A.parseString(e,{decodeValues:!1}),n=s.path??(m.pathname.split("/").slice(0,-1).join("/")||"/");i(t,r,{path:n,encode:e=>e,...s})}return b}})})(l,u);return d.catch((()=>{})),d}}({event:k,options:a,manifest:i,state:l,get_cookie_header:v,set_internal:$}),l.emulator?.platform&&(k.platform=await l.emulator.platform({config:{},prerender:!!l.prerendering?.fallback}));const j=l.prerendering?.inside_reroute;try{l.prerendering&&(l.prerendering.inside_reroute=!0),x=await a.hooks.reroute({url:new URL(u),fetch:k.fetch})??u.pathname}catch{return X("Internal Server Error",{status:500})}finally{l.prerendering&&(l.prerendering.inside_reroute=j)}try{x=S(x)}catch{return X("Malformed URI",{status:400})}if(x!==u.pathname&&!l.prerendering?.fallback&&he(i,x)){const e=new URL(o.url);e.pathname=h?M(x):p?V(x):x;const t=await fetch(e,o),r=new Headers(t.headers);return r.has("content-encoding")&&(r.delete("content-encoding"),r.delete("content-length")),new Response(t.body,{headers:r,status:t.status,statusText:t.statusText})}let O=null;if(r&&!l.prerendering?.fallback){if(!x.startsWith(r))return X("Not found",{status:404});x=x.slice(r.length)||"/"}if(p)return async function(e,t,r){if(!r._.client.routes)return X("Server-side route resolution disabled",{status:400});let s=null,n={};const o=await r._.matchers();for(const a of r._.client.routes){const t=a.pattern.exec(e);if(!t)continue;const r=Ke(t,a.params,o);if(r){s=a,n=w(r);break}}return Ye(s,n,t,r).response}(x,new URL(o.url),i);if(x===`/${s}/env.js`)return function(e){return ft??=`export const env=${JSON.stringify(n)}`,mt??=`W/${Date.now()}`,_t??=new Headers({"content-type":"application/javascript; charset=utf-8",etag:mt}),e.headers.get("if-none-match")===mt?new Response(void 0,{status:304,headers:_t}):new Response(ft,{headers:_t})}(o);if(x.startsWith(`/${s}`)){const e=new Headers;return e.set("cache-control","public, max-age=0, must-revalidate"),X("Not found",{status:404,headers:e})}if(!l.prerendering?.fallback){const e=await i._.matchers();for(const t of i._.routes){const r=t.pattern.exec(x);if(!r)continue;const s=Ke(r,t.params,e);if(s){O=t,k.route={id:O.id},k.params=w(s);break}}}let N={transformPageChunk:yt,filterSerializedResponseHeaders:gt,preload:wt},L="never";try{const t=O?.page?new rt(await function(e,t){return Promise.all([...e.layouts.map((e=>null==e?e:t._.nodes[e]())),t._.nodes[e.leaf]()])}(O.page,i)):void 0;if(O){if(u.pathname===r||u.pathname===r+"/")L="always";else if(t)L=t.trailing_slash();else if(O.endpoint){const e=await O.endpoint();L=e.trailingSlash??"never"}if(!h){const e=E(u.pathname,L);if(e!==u.pathname&&!l.prerendering?.fallback)return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(e.startsWith("//")?u.origin+e:e)+("?"===u.search?"":u.search)}})}if(l.before_handle||l.emulator?.platform){let e={},r=!1;if(O.endpoint){const t=await O.endpoint();e=t.config??e,r=t.prerender??r}else t&&(e=t.get_config()??e,r=t.prerender());l.before_handle&&l.before_handle(k,e,r),l.emulator?.platform&&(k.platform=await l.emulator.platform({config:e,prerender:r}))}}b(L),!l.prerendering||l.prerendering.fallback||l.prerendering.inside_reroute||g(u);const s=await W(k,(()=>a.hooks.handle({event:k,resolve:(r,s)=>W(null,(()=>async function(t,r,s){try{if(s&&(N={transformPageChunk:s.transformPageChunk||yt,filterSerializedResponseHeaders:s.filterSerializedResponseHeaders||gt,preload:s.preload||wt}),a.hash_routing||l.prerendering?.fallback)return await tt({event:t,options:a,manifest:i,state:l,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:N});if(O){const s=t.request.method;let n;if(h)n=await async function(e,t,r,s,n,o,a){if(!t.page)return new Response(void 0,{status:404});try{const i=[...t.page.layouts,t.page.leaf],c=o??i.map((()=>!0));let l=!1;const u=new URL(e.url);u.pathname=E(u.pathname,a);const d={...e,url:u},p=i.map(((e,t)=>function(){let r,o=!1;return()=>o?r:(o=!0,r=(async()=>{try{if(l)return{type:"skip"};const r=null==e?e:await s._.nodes[e]();return je({event:d,state:n,node:r,parent:async()=>{const e={};for(let r=0;r<t;r+=1){const t=await p[r]();t&&Object.assign(e,t.data)}return e}})}catch(r){throw l=!0,r}})())}())),h=p.map((async(e,t)=>c[t]?e():{type:"skip"}));let f=h.length;const m=await Promise.all(h.map(((t,s)=>t.catch((async t=>{if(t instanceof D)throw t;return f=Math.min(f,s+1),{type:"error",error:await le(e,r,t),status:t instanceof z||t instanceof I?t.status:void 0}}))))),{data:_,chunks:y}=it(e,r,m);return y?new Response(new ReadableStream({async start(e){e.enqueue(nt.encode(_));for await(const t of y)e.enqueue(nt.encode(t));e.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):ot(_)}catch(i){const t=i;return t instanceof D?at(t):ot(await le(e,r,t),500)}}(t,O,a,i,l,d,L);else if(!O.endpoint||O.page&&!function(e){const{method:t,headers:r}=e.request;return!(!P.includes(t)||H.includes(t))||("POST"!==t||"true"!==r.get("x-sveltekit-action"))&&"text/html"!==U(e.request.headers.get("accept")??"*/*",["*","text/html"])}(t)){if(!O.page)throw new Error("Route is neither page nor endpoint. This should never happen");if(!r)throw new Error("page_nodes not found. This should never happen");if(vt.has(s))n=await async function(t,r,s,n,o,a,i){if(o.depth>10)return X(`Not found: ${t.url.pathname}`,{status:404});if(me(t)){const e=await n._.nodes[r.leaf]();return async function(e,t,r){const s=r?.actions;if(!s){const r=new I(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page");return ge({type:"error",error:await le(e,t,r)},{status:r.status,headers:{allow:"GET"}})}we(s);try{const r=await ve(e,s);return ge(r instanceof F?{type:"failure",status:r.status,data:$e(r.data,e.route.id,t.hooks.transport)}:{type:"success",status:r?200:204,data:$e(r,e.route.id,t.hooks.transport)})}catch(n){const r=n;return r instanceof D?ye(r):ge({type:"error",error:await le(e,t,_e(r))},{status:Y(r)})}}(t,s,e?.server)}try{const l=a.page();let u,d=200;if(function(e){return"POST"===e.request.method}(t)){if(u=await async function(e,t){const r=t?.actions;if(!r)return e.setHeaders({allow:"GET"}),{type:"error",error:new I(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page")};we(r);try{const t=await ve(e,r);return t instanceof F?{type:"failure",status:t.status,data:t.data}:{type:"success",status:200,data:t}}catch(s){const e=s;return e instanceof D?{type:"redirect",status:e.status,location:e.location}:{type:"error",error:_e(e)}}}(t,l.server),"redirect"===u?.type)return ue(u.status,u.location);"error"===u?.type&&(d=Y(u.error)),"failure"===u?.type&&(d=u.status)}const p=a.prerender();if(p){const e=l.server;if(e?.actions)throw new Error("Cannot prerender pages with actions")}else if(o.prerendering)return new Response(void 0,{status:204});o.prerender_default=p;const h=a.should_prerender_data(),f=M(t.url.pathname),m=[];if(!(!1!==a.ssr()||o.prerendering&&h))return e&&u&&t.request.headers.has("x-sveltekit-action"),await tt({branch:[],fetched:m,page_config:{ssr:!1,csr:a.csr()},status:d,error:null,event:t,options:s,manifest:n,state:o,resolve_opts:i});const _=[];let y=null;const g=a.data.map(((e,r)=>{if(y)throw y;return Promise.resolve().then((async()=>{try{if(e===l&&"error"===u?.type)throw u.error;return await je({event:t,state:o,node:e,parent:async()=>{const e={};for(let t=0;t<r;t+=1){const r=await g[t];r&&Object.assign(e,r.data)}return e}})}catch(s){throw y=s,y}}))})),w=a.csr(),v=a.data.map(((e,r)=>{if(y)throw y;return Promise.resolve().then((async()=>{try{return await Ee({event:t,fetched:m,node:e,parent:async()=>{const e={};for(let t=0;t<r;t+=1)Object.assign(e,await v[t]);return e},resolve_opts:i,server_data_promise:g[r],state:o,csr:w})}catch(s){throw y=s,y}}))}));for(const e of g)e.catch((()=>{}));for(const e of v)e.catch((()=>{}));for(let e=0;e<a.data.length;e+=1){const l=a.data[e];if(l)try{const t=await g[e],r=await v[e];_.push({node:l,server_data:t,data:r})}catch(c){const a=c;if(a instanceof D){if(o.prerendering&&h){const e=JSON.stringify({type:"redirect",location:a.location});o.prerendering.dependencies.set(f,{response:X(e),body:e})}return ue(a.status,a.location)}const l=Y(a),u=await le(t,s,a);for(;e--;)if(r.errors[e]){const a=r.errors[e],c=await n._.nodes[a]();let d=e;for(;!_[d];)d-=1;return await tt({event:t,options:s,manifest:n,state:o,resolve_opts:i,page_config:{ssr:!0,csr:!0},status:l,error:u,branch:fe(_.slice(0,d+1)).concat({node:c,data:null,server_data:null}),fetched:m})}return ie(s,l,u.message)}else _.push(null)}if(o.prerendering&&h){let{data:e,chunks:r}=it(t,s,_.map((e=>e?.server_data)));if(r)for await(const t of r)e+=t;o.prerendering.dependencies.set(f,{response:X(e),body:e})}const $=a.ssr();return await tt({event:t,options:s,manifest:n,state:o,resolve_opts:i,page_config:{csr:a.csr(),ssr:$},status:d,error:null,branch:!1===$?[]:fe(_),action_result:u,fetched:m})}catch(c){return await st({event:t,options:s,manifest:n,state:o,status:500,error:c,resolve_opts:i})}}(t,O.page,a,i,l,r,N);else{const e=new Set($t),t=await i._.nodes[O.page.leaf]();t?.server?.actions&&e.add("POST"),n="OPTIONS"===s?new Response(null,{status:204,headers:{allow:Array.from(e.values()).join(", ")}}):oe([...e].reduce(((e,t)=>(e[t]=!0,e)),{}),s)}}else n=await async function(e,t,r){const s=e.request.method;let n=t[s]||t.fallback;if("HEAD"===s&&t.GET&&!t.HEAD&&(n=t.GET),!n)return oe(t,s);const o=t.prerender??r.prerender_default;if(o&&(t.POST||t.PATCH||t.PUT||t.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(r.prerendering&&!r.prerendering.inside_reroute&&!o){if(r.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}try{const t=await W(e,(()=>n(e)));if(!(t instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);if(r.prerendering&&(!r.prerendering.inside_reroute||o)){const s=new Response(t.clone().body,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)});if(s.headers.set("x-sveltekit-prerender",String(o)),!r.prerendering.inside_reroute||!o)return s;s.headers.set("x-sveltekit-routeid",encodeURI(e.route.id)),r.prerendering.dependencies.set(e.url.pathname,{response:s,body:null})}return t}catch(a){if(a instanceof D)return new Response(void 0,{status:a.status,headers:{location:a.location}});throw a}}(t,await O.endpoint(),l);if("GET"===o.method&&O.page&&O.endpoint){const e=n.headers.get("vary")?.split(",")?.map((e=>e.trim().toLowerCase()));e?.includes("accept")||e?.includes("*")||(n=new Response(n.body,{status:n.status,statusText:n.statusText,headers:new Headers(n.headers)}),n.headers.append("Vary","Accept"))}return n}if(l.error&&t.isSubRequest){const e=new Headers(o.headers);return e.set("x-sveltekit-error","true"),await fetch(o,{headers:e})}return l.error?X("Internal Server Error",{status:500}):0===l.depth?await st({event:t,options:a,manifest:i,state:l,status:404,error:new I(404,"Not Found",`Not found: ${t.url.pathname}`),resolve_opts:N}):l.prerendering?X("not found",{status:404}):await fetch(o)}catch(n){return await ce(t,a,n)}finally{t.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},t.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}(r,t,s).then((e=>{for(const t in m){const r=m[t];e.headers.set(t,r)}return pt(e.headers,Object.values(y)),l.prerendering&&null!==r.route.id&&e.headers.set("x-sveltekit-routeid",encodeURI(r.route.id)),e}))))})));if(200===s.status&&s.headers.has("etag")){let e=o.headers.get("if-none-match");e?.startsWith('W/"')&&(e=e.substring(2));const t=s.headers.get("etag");if(e===t){const e=new Headers({etag:t});for(const t of["cache-control","content-location","date","expires","vary","set-cookie"]){const r=s.headers.get(t);r&&e.set(t,r)}return new Response(void 0,{status:304,headers:e})}}if(h&&s.status>=300&&s.status<=308){const e=s.headers.get("location");if(e)return at(new D(s.status,e))}return s}catch(Q){if(Q instanceof D){const e=h?at(Q):O?.page&&me(k)?ye(Q):ue(Q.status,Q.location);return pt(e.headers,Object.values(y)),e}return await ce(k,a,Q)}}const kt={get({type:e},t){throw new Error(`Cannot read values from $env/dynamic/${e} while prerendering (attempted to read env.${t.toString()}). Use $env/static/${e} instead`)}};let xt;class jt{#_;#y;constructor(e){this.#_=l,this.#y=e}async init({env:e,read:t}){const r={public_prefix:this.#_.env_public_prefix,private_prefix:this.#_.env_private_prefix},s=function(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith(r)&&(""===t||!e.startsWith(t)))))}(e,r),n=function(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith(t)&&(""===r||!e.startsWith(r)))))}(e,r);d(p?new Proxy({type:"private"},kt):s),h(p?new Proxy({type:"public"},kt):n),f(n),t&&m(t),await(xt??=(async()=>{try{const e=await u();this.#_.hooks={handle:e.handle||(({event:e,resolve:t})=>t(e)),handleError:e.handleError||(({error:e})=>console.error(e)),handleFetch:e.handleFetch||(({request:e,fetch:t})=>t(e)),reroute:e.reroute||(()=>{}),transport:e.transport||{}},e.init&&await e.init()}catch(e){throw e}})())}async respond(e,t){return bt(e,this.#_,this.#y,{...t,error:!1,depth:0})}}export{jt as Server};
